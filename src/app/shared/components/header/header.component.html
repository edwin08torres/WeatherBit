<nav class="navbar bg-body-tertiary border-bottom" aria-label="Barra principal">
  <div class="container d-flex align-items-center justify-content-between space-opciones">
    <a class="navbar-brand fw-semibold" routerLink="/">Weather dashboard</a>

    <div class="d-flex align-items-center gap-2">
      <button
        type="button"
        class="btn btn-outline-secondary btn-sm header-theme-btn d-flex align-items-center gap-2"
        (click)="toggleTheme()"
        [attr.aria-pressed]="currentTheme === 'dark'"
      >
        <span aria-hidden="true">
          {{ currentTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è' }}
        </span>
        <span class="d-none d-sm-inline">
          {{ currentTheme === 'dark' ? 'Modo oscuro' : 'Modo claro' }}
        </span>
      </button>

      <div class="d-none d-lg-block">
        <div class="dropdown" [class.show]="settingsOpen">
          <button
            type="button"
            class="btn btn-link nav-link dropdown-toggle px-2"
            (click)="toggleSettings($event)"
            [attr.aria-expanded]="settingsOpen"
            id="settingsDropdown"
          >
            Opciones
          </button>
          <ul
            class="dropdown-menu dropdown-menu-end my-3"
            [class.show]="settingsOpen"
            aria-labelledby="settingsDropdown"
          >
            <li class="px-3">
              <label class="form-label small mb-1" for="ttlSelect">Duraci√≥n de cach√©</label>
              <select
                id="ttlSelect"
                class="form-select form-select-sm"
                [(ngModel)]="ttl"
                (ngModelChange)="onTtlChange($event)"
              >
                <option [ngValue]="30">30 minutos</option>
                <option [ngValue]="60">1 hora</option>
                <option [ngValue]="120">2 horas (por defecto)</option>
                <option [ngValue]="240">4 horas</option>
              </select>
              <p class="text-muted small mt-1 mb-0">
                Controla cu√°nto tiempo se reutilizan los datos de la API guardados en el navegador.
              </p>
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <button type="button" class="dropdown-item" (click)="clearCache()">
                Vaciar cach√© meteorol√≥gica
              </button>
            </li>
          </ul>
        </div>
      </div>

      <button
        type="button"
        class="btn btn-outline-secondary btn-icon d-lg-none"
        (click)="openMobileMenu($event)"
        [attr.aria-expanded]="navOpen"
        aria-label="Abrir men√∫"
      >
        <span class="header-hamburger">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>
  </div>
</nav>

<div class="mobile-menu-backdrop d-lg-none" *ngIf="navOpen"></div>

<div class="mobile-menu d-lg-none" *ngIf="navOpen" (click)="closeMobileMenu()">
  <div class="mobile-menu-card" (click)="$event.stopPropagation()">
    <ul class="mobile-menu-list mb-2">
      <li class="mobile-menu-item">
        <div class="w-100">
          <label class="form-label small mb-1" for="ttlSelectMobile">Duraci√≥n de cach√©</label>
          <select
            id="ttlSelectMobile"
            class="form-select form-select-sm"
            [(ngModel)]="ttl"
            (ngModelChange)="onTtlChange($event)"
          >
            <option [ngValue]="30">30 minutos</option>
            <option [ngValue]="60">1 hora</option>
            <option [ngValue]="120">2 horas (por defecto)</option>
            <option [ngValue]="240">4 horas</option>
          </select>
          <p class="text-muted small mt-1 mb-0">
            Controla cu√°nto tiempo se reutilizan los datos de la API guardados en el navegador.
          </p>
        </div>
      </li>

      <li class="mobile-menu-divider"></li>

      <li class="mobile-menu-item">
        <button
          type="button"
          class="btn btn-primary w-100 text-center px-0"
          (click)="clearCache(); closeMobileMenu()"
        >
          Vaciar cach√© meteorol√≥gica
        </button>
      </li>
    </ul>
  </div>
</div>
