<div class="container py-4">
  <header class="mb-4">
    <p class="text-muted mb-0">
      Añade ubicaciones por código postal de EE.UU. para ver las condiciones actuales y el
      pronóstico a 5 días.
    </p>
  </header>

  <app-location-search (search)="onSearch($event)" [loading]="loading"></app-location-search>

  <div *ngIf="vm$ | async as vm" class="mt-4">
    <div *ngIf="vm.locations.length === 0" class="alert alert-info" role="status">
      Añade tu primer código postal para comenzar.
    </div>

    <div *ngIf="vm.locations.length > 0">
      <app-tabs
        [items]="vm.locations"
        [activeId]="vm.activeLocationId"
        [contentTemplate]="currentConditions"
        (activeChange)="onTabSelected($event)"
        (closed)="onTabClosed($event)"
      ></app-tabs>

      <ng-template #currentConditions let-location>
        <app-current-conditions-card
          [location]="location"
          (showForecast)="onShowForecast($event)"
        ></app-current-conditions-card>
      </ng-template>
    </div>
  </div>

  <div
    *ngIf="errorMessage"
    class="toast-container position-fixed top-0 end-0 p-3"
    style="z-index: 1080; top: 4rem"
  >
    <div class="toast show text-bg-danger border-0 shadow-sm">
      <div class="d-flex align-items-center">
        <div class="toast-body">
          {{ errorMessage }}
        </div>
        <button
          type="button"
          class="btn-close btn-close-white me-2 m-auto"
          aria-label="Cerrar"
          (click)="closeErrorToast()"
        ></button>
      </div>
    </div>
  </div>
</div>
